# Installation Guide - 3 Commands to Deploy

## Server Installation (Literally 3 Commands!)

```bash
# 1. Copy and edit config (only set your server IP!)
cd deploy/server/
cp .env.example .env
nano .env  # Change: SERVER_ADDRESS=123.45.67.89

# 2. Run setup (auto-generates everything else!)
./setup.sh

# 3. Start server
docker-compose up -d
```

That's it! Everything else is **auto-generated**:
- ✅ UUID - generated automatically
- ✅ REALITY Private Key - generated automatically
- ✅ REALITY Public Key - generated automatically
- ✅ Config files - created automatically
- ✅ VLESS URL - generated automatically

## What You Need to Provide

**ONLY ONE THING:** Your server's public IP or domain

That's it. Everything else happens automatically.

## Get Connection URL

After setup completes, get your VLESS URL:

```bash
./generate-vless-url.sh
```

Copy the output starting with `vless://` and share with clients!

## Client Installation

### Desktop/Mobile Apps

1. **Copy VLESS URL** from server
2. **Import to your app:**
   - Windows (v2rayN): Import from Clipboard
   - Android (V2RayNG): Import from Clipboard
   - iOS (Shadowrocket): Paste URL
   - Mac (Nekoray): Import from Clipboard
3. **Connect!**

### Docker Client (Linux)

```bash
cd deploy/client/
./setup.sh 'vless://paste-your-url-here'
docker-compose up -d
```

## Example: Complete Server Setup

Here's a real example:

```bash
# You have a VPS with IP: 123.45.67.89

# Go to server directory
cd Xray-core/deploy/server/

# Copy .env
cp .env.example .env

# Edit .env - change this ONE line:
# SERVER_ADDRESS=123.45.67.89

# Run setup (auto-generates UUID, keys, configs)
./setup.sh

# Output shows:
# [INFO] Generating CLIENT_UUID...
# [INFO] Generated UUID: a1b2c3d4-5678-90ab-cdef-1234567890ab
# [INFO] Generating REALITY X25519 key pair...
# [INFO] Generated Private Key: abc123...
# [INFO] Generated Public Key: xyz789...
# [INFO] Configuration loaded and auto-generated successfully
# ✓ Configuration is valid!

# Start server
docker-compose up -d

# Get VLESS URL to share
./generate-vless-url.sh

# Copy the vless:// URL and you're done!
```

## What Gets Auto-Generated

When you run `./setup.sh`, it automatically:

1. **Generates UUID** (if empty in .env)
   - Uses: `docker run ghcr.io/xtls/xray-core:latest uuid`
   - Saves to .env

2. **Generates REALITY Keys** (if empty in .env)
   - Uses: `docker run ghcr.io/xtls/xray-core:latest x25519`
   - Saves both private and public keys to .env

3. **Creates config.json**
   - Replaces all placeholders with generated values
   - Ready to use immediately

4. **Validates Configuration**
   - Tests the config before starting
   - Ensures everything is correct

5. **Generates VLESS URL**
   - Creates shareable connection URL
   - Displays in terminal
   - Saves to `vless_url.txt`

## .env File Before and After

**BEFORE (what you edit):**
```bash
SERVER_ADDRESS=123.45.67.89  # YOU SET THIS
XRAY_PORT=443
REALITY_DEST=www.microsoft.com:443
REALITY_SERVER_NAMES=www.microsoft.com,www.bing.com

# Empty - will be auto-generated:
CLIENT_UUID=
REALITY_PRIVATE_KEY=
REALITY_PUBLIC_KEY=
```

**AFTER (after running ./setup.sh):**
```bash
SERVER_ADDRESS=123.45.67.89
XRAY_PORT=443
REALITY_DEST=www.microsoft.com:443
REALITY_SERVER_NAMES=www.microsoft.com,www.bing.com

# Auto-generated by setup.sh:
CLIENT_UUID=a1b2c3d4-5678-90ab-cdef-1234567890ab
REALITY_PRIVATE_KEY=YCwIrw38TKHYt1k_qKfv0ng6RvwDF46fHZZNZEF5YEo
REALITY_PUBLIC_KEY=Z84J2IelR9ch3k8VtlVhhs5ycBUlXZrtQLjbdsttuVU
```

## Customizing (Optional)

If you want to change the REALITY target website:

```bash
# Edit .env BEFORE running setup.sh:
REALITY_DEST=www.apple.com:443
REALITY_SERVER_NAMES=www.apple.com

# Popular targets:
# - www.microsoft.com:443
# - www.apple.com:443
# - www.cloudflare.com:443
# - www.amazon.com:443
```

Then run `./setup.sh` as normal.

## Re-running Setup

If you need to regenerate keys or configs:

```bash
# Edit .env, clear the values you want to regenerate:
CLIENT_UUID=
REALITY_PRIVATE_KEY=
REALITY_PUBLIC_KEY=

# Run setup again
./setup.sh

# New values will be generated!
```

## Verification

After starting the server, verify it's running:

```bash
# Check container status
docker-compose ps
# Should show: xray-server   Up

# Check logs
docker-compose logs -f
# Should show: Xray started, VLESS TCP server started

# Get VLESS URL
./generate-vless-url.sh
```

## Summary

**What you do:**
1. Set `SERVER_ADDRESS` in .env
2. Run `./setup.sh`
3. Run `docker-compose up -d`

**What happens automatically:**
- UUID generation ✅
- REALITY key generation ✅
- Config file creation ✅
- Configuration validation ✅
- VLESS URL generation ✅

**Total setup time:** ~2 minutes (most of it is Docker pulling images)

**User input required:** ONE line (your server IP)

That's it! No manual key generation, no manual UUID creation, no complex config editing. Just set your IP and run the script.

---

Need more details? See [DEPLOYMENT.md](DEPLOYMENT.md)
